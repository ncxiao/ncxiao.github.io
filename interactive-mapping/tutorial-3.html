<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Interactive Mapping</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
@font-face { font-family: octicons-link; src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff'); } html { /* width: 880px; */ /* padding: 45px; */ margin-top: 25px; margin-bottom: 125px; /* border: 1px solid #ddd; */ /* border-radius: 3px; */ } body { -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; line-height: 1.5; color: #333; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; font-size: 16px; line-height: 1.5; word-wrap: break-word; } body .pl-c { color: #969896; } body .pl-c1, body .pl-s .pl-v { color: #0086b3; } body .pl-e, body .pl-en { color: #795da3; } body .pl-smi, body .pl-s .pl-s1 { color: #333; } body .pl-ent { color: #63a35c; } body .pl-k { color: #a71d5d; } body .pl-s, body .pl-pds, body .pl-s .pl-pse .pl-s1, body .pl-sr, body .pl-sr .pl-cce, body .pl-sr .pl-sre, body .pl-sr .pl-sra { color: #183691; } body .pl-v { color: #ed6a43; } body .pl-id { color: #b52a1d; } body .pl-ii { color: #f8f8f8; background-color: #b52a1d; } body .pl-sr .pl-cce { font-weight: bold; color: #63a35c; } body .pl-ml { color: #693a17; } body .pl-mh, body .pl-mh .pl-en, body .pl-ms { font-weight: bold; color: #1d3e81; } body .pl-mq { color: #008080; } body .pl-mi { font-style: italic; color: #333; } body .pl-mb { font-weight: bold; color: #333; } body .pl-md { color: #bd2c00; background-color: #ffecec; } body .pl-mi1 { color: #55a532; background-color: #eaffea; } body .pl-mdr { font-weight: bold; color: #795da3; } body .pl-mo { color: #1d3e81; } body .octicon { display: inline-block; vertical-align: text-top; fill: currentColor; } body a { background-color: transparent; -webkit-text-decoration-skip: objects; } body a:active, body a:hover { outline-width: 0; } body strong { font-weight: inherit; } body strong { font-weight: bolder; } body h1 { font-size: 2em; margin: 0.67em 0; } body img { border-style: none; } body svg:not(:root) { overflow: hidden; } body code, body kbd, body pre { font-family: monospace, monospace; font-size: 1em; } body hr { box-sizing: content-box; height: 0; overflow: visible; } body input { font: inherit; margin: 0; } body input { overflow: visible; } body [type="checkbox"] { box-sizing: border-box; padding: 0; } body * { box-sizing: border-box; } body input { font-family: inherit; font-size: inherit; line-height: inherit; } body a { color: #4078c0; text-decoration: none; } body a:hover, body a:active { text-decoration: underline; } body strong { font-weight: 600; } body hr { height: 0; margin: 15px 0; overflow: hidden; background: transparent; border: 0; border-bottom: 1px solid #ddd; } body hr::before { display: table; content: ""; } body hr::after { display: table; clear: both; content: ""; } body table { border-spacing: 0; border-collapse: collapse; } body td, body th { padding: 0; } body h1, body h2, body h3, body h4, body h5, body h6 { margin-top: 0; margin-bottom: 0; } body h1 { font-size: 32px; font-weight: 600; } body h2 { font-size: 24px; font-weight: 600; } body h3 { font-size: 20px; font-weight: 600; } body h4 { font-size: 16px; font-weight: 600; } body h5 { font-size: 14px; font-weight: 600; } body h6 { font-size: 12px; font-weight: 600; } body p { margin-top: 0; margin-bottom: 10px; } body blockquote { margin: 0; } body ul, body ol { padding-left: 0; margin-top: 0; margin-bottom: 0; } body ol ol, body ul ol { list-style-type: lower-roman; } body ul ul ol, body ul ol ol, body ol ul ol, body ol ol ol { list-style-type: lower-alpha; } body dd { margin-left: 0; } body code { font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace; font-size: 12px; } body pre { margin-top: 0; margin-bottom: 0; font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace; } body .octicon { vertical-align: text-bottom; } body input { -webkit-font-feature-settings: "liga" 0; font-feature-settings: "liga" 0; } body::before { display: table; content: ""; } body::after { display: table; clear: both; content: ""; } body>*:first-child { margin-top: 0 !important; } body>*:last-child { margin-bottom: 0 !important; } body a:not([href]) { color: inherit; text-decoration: none; } body .anchor { float: left; padding-right: 4px; margin-left: -20px; line-height: 1; } body .anchor:focus { outline: none; } body p, body blockquote, body ul, body ol, body dl, body table, body pre { margin-top: 0; margin-bottom: 16px; } body hr { height: 0.25em; padding: 0; margin: 24px 0; background-color: #e7e7e7; border: 0; } body blockquote { padding: 0 1em; color: #777; border-left: 0.25em solid #ddd; } body blockquote>:first-child { margin-top: 0; } body blockquote>:last-child { margin-bottom: 0; } body kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: #555; vertical-align: middle; background-color: #fcfcfc; border: solid 1px #ccc; border-bottom-color: #bbb; border-radius: 3px; box-shadow: inset 0 -1px 0 #bbb; } body h1, body h2, body h3, body h4, body h5, body h6 { margin-top: 24px; margin-bottom: 16px; font-weight: 600; line-height: 1.25; } body h1 .octicon-link, body h2 .octicon-link, body h3 .octicon-link, body h4 .octicon-link, body h5 .octicon-link, body h6 .octicon-link { color: #000; vertical-align: middle; visibility: hidden; } body h1:hover .anchor, body h2:hover .anchor, body h3:hover .anchor, body h4:hover .anchor, body h5:hover .anchor, body h6:hover .anchor { text-decoration: none; } body h1:hover .anchor .octicon-link, body h2:hover .anchor .octicon-link, body h3:hover .anchor .octicon-link, body h4:hover .anchor .octicon-link, body h5:hover .anchor .octicon-link, body h6:hover .anchor .octicon-link { visibility: visible; } body h1 { padding-bottom: 0.3em; font-size: 2em; border-bottom: 1px solid #eee; } body h2 { padding-bottom: 0.3em; font-size: 1.5em; border-bottom: 1px solid #eee; } body h3 { font-size: 1.25em; } body h4 { font-size: 1em; } body h5 { font-size: 0.875em; } body h6 { font-size: 0.85em; color: #777; } body ul, body ol { padding-left: 2em; } body ul ul, body ul ol, body ol ol, body ol ul { margin-top: 0; margin-bottom: 0; } body li>p { margin-top: 16px; } body li+li { margin-top: 0.25em; } body dl { padding: 0; } body dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; } body dl dd { padding: 0 16px; margin-bottom: 16px; } body table { display: block; width: 100%; overflow: auto; } body table th { font-weight: bold; } body table th, body table td { padding: 6px 13px; border: 1px solid #ddd; } body table tr { background-color: #fff; border-top: 1px solid #ccc; } /* body table tr:nth-child(2n) { background-color: #f8f8f8; } */ body img { max-width: 100%; box-sizing: content-box; background-color: #fff; } body code { padding: 0; padding-top: 0.2em; padding-bottom: 0.2em; margin: 0; font-size: 85%; background-color: rgba(0,0,0,0.04); border-radius: 3px; } body code::before, body code::after { letter-spacing: -0.2em; content: "\00a0"; } body pre { word-wrap: normal; } body pre>code { padding: 0; margin: 0; font-size: 100%; word-break: normal; white-space: pre; background: transparent; border: 0; } body .highlight { margin-bottom: 16px; } body .highlight pre { margin-bottom: 0; word-break: normal; } body .highlight pre, body pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; background-color: #f7f7f7; border-radius: 3px; } body pre code { display: inline; max-width: auto; padding: 0; margin: 0; overflow: visible; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; } body pre code::before, body pre code::after { content: normal; } body .pl-0 { padding-left: 0 !important; } body .pl-1 { padding-left: 3px !important; } body .pl-2 { padding-left: 6px !important; } body .pl-3 { padding-left: 12px !important; } body .pl-4 { padding-left: 24px !important; } body .pl-5 { padding-left: 36px !important; } body .pl-6 { padding-left: 48px !important; } body .full-commit .btn-outline:not(:disabled):hover { color: #4078c0; border: 1px solid #4078c0; } body kbd { display: inline-block; padding: 3px 5px; font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace; line-height: 10px; color: #555; vertical-align: middle; background-color: #fcfcfc; border: solid 1px #ccc; border-bottom-color: #bbb; border-radius: 3px; box-shadow: inset 0 -1px 0 #bbb; } body :checked+.radio-label { position: relative; z-index: 1; border-color: #4078c0; } body .task-list-item { list-style-type: none; } body .task-list-item+.task-list-item { margin-top: 3px; } body .task-list-item input { margin: 0 0.2em 0.25em -1.6em; vertical-align: middle; } body hr { border-bottom-color: #eee; } 
</style>
    </head>
    <body class="vscode-body vscode-light">
        <p>Tutorials: <a href="tutorial-1.html">HTML/CSS/JS</a> | <a href="tutorial-2.html">Leaflet</a> | D3 | <a href="tutorial-4.html">Visualizing spatial-temporal data 1</a> | <a href="tutorial-5.html">Visualizing spatial-temporal data 2</a></p>
<h1 id="interactive-mapping">Interactive Mapping</h1>
<h2 id="tutorial-3-data-visualization-with-d3">Tutorial 3. Data Visualization with D3</h2>
<p><em>Ningchuan Xiao</em></p>
<p>D3 stands for Data Driven Documents. It is a very popular javascript library that can be used to visualize data on the web. There are many sources where we can learn about this technique and here are a few examples:</p>
<ul>
<li>The web: <a href="https://d3js.org">d3js.org</a></li>
<li>A book: <a href="https://leanpub.com/D3-Tips-and-Tricks">D3 Tips and Tricks</a></li>
<li>Another book: <a href="http://alignedleft.com/tutorials/d3">Interactive Data Visualization for the Web</a></li>
<li>D3 tutorials: <a href="http://alignedleft.com/tutorials/d3">Scott Murray</a></li>
<li>Discussion groups: <a href="https://groups.google.com/forum/?fromgroups#!forum/d3-js">Google group</a></li>
<li>Stackoverflow: <a href="http://stackoverflow.com/questions/tagged/d3.js">Tagged questions</a> and general</li>
<li>More examples can be found at <a href="http://bl.ocks.org">http://bl.ocks.org</a></li>
</ul>
<p>This workshop will utilize multiple materials from the above sources, especially from the Murray's tutorials.</p>
<h2 id="getting-started-with-method-chaining">Getting started with method chaining</h2>
<p>The basic skeleton of an HTML file is like this:</p>
<pre><code class="language-html"><div><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>D3 Test<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://d3js.org/d3.v7.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript">
            <span class="hljs-comment">// This is where we put the good stuff using D3</span>
        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>
<p>Now let's add one line of code to the above structure:</p>
<pre><code class="language-js"><div>d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;p&quot;</span>)
    .text(<span class="hljs-string">&quot;New paragraph!&quot;</span>);
</div></code></pre>
<p>On Safari and Chrome, we can see the effect of this immediately.</p>
<p>In our example, we first get the reference to the body of the entire page using the <code>select</code> method of D3. This reference is then <strong>handed off</strong> to the next operation, which is to append a <strong>p</strong> element to the end of body. The <code>append</code> function then hands down the reference to the element to the next one, which in turn is to replace the text inside the element with the string specified.</p>
<p>The way methods are used in the above example is called <strong>method chaining</strong>. This is an extremely handy way to get things done in Javascript. But we will need to make sure that the next method chained can apply on the element referenced from the previous method. The <a href="https://github.com/mbostock/d3/wiki/API-Reference">D3 reference</a> is a good place to look up all the methods and elements.</p>
<p>The key technique that enables method chaining is <strong>DOM</strong>, or Document Object Model. The simplest way to understanding DOM is to examine the tree structure of the above HTML. Each part of the tree can be considered as an object and D3 (or javascript in general) can retrieve that part so that we can make changes to that part. We can, for example, change the structure as we did by adding a new element into the body object. We can also change the content as we did too. Other things we can do is to change the style and/or add other elements such as different graphs.</p>
<h2 id="binding-data">Binding data</h2>
<p>A big part of D3 is to allow us to incorporate data into our web document and show the data. To illustrate how this works in D3, let's remove all the code from our previous example and add the following in the script part:</p>
<pre><code class="language-js"><div>data = [];
<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)
    data[i] = <span class="hljs-built_in">Math</span>.floor((<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">10</span>) + <span class="hljs-number">1</span>);
</div></code></pre>
<p>The code generates a random set of 10 integers. Then we write the following JS code. The second last line is added here so we can a chance to see what are the numbers in the <code>data</code> array. And the last line is to show how we can dynamically change the style of page elements.</p>
<pre><code class="language-js"><div>d3.select(<span class="hljs-string">&quot;body&quot;</span>).selectAll(<span class="hljs-string">&quot;p&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;p&quot;</span>)
    .text(<span class="hljs-string">&quot;New paragraph!&quot;</span>);
<span class="hljs-built_in">document</span>.write(data);
d3.selectAll(<span class="hljs-string">&quot;p&quot;</span>).style(<span class="hljs-string">&quot;color&quot;</span>, <span class="hljs-string">&quot;red&quot;</span>);
</div></code></pre>
<p>Load the file into the browser and we should see 10 lines of the same text &quot;New Paragraph!&quot; in the page. We need to understand how each line of code works to fully understand why the page looks in this way.</p>
<p>We can first examine what is happening behind the scene. This requires a developer tool from the browser. We can use the Develop menu in Safari, or Inspect option in Chrome. Firefox might have something called Firebug. (No clue about IE.)</p>
<p>We can simply type the following line in the console to see the actions:</p>
<pre><code class="language-js"><div><span class="hljs-built_in">console</span>.log(d3.selectAll(<span class="hljs-string">&quot;p&quot;</span>))
</div></code></pre>
<p>We can take a look at how this turns out in Chrome console, where we should see there is an item called <code>__data__</code> for each <code>p</code> element (click on the <code>p</code> tag in the Elements tab and then click on Properties tab in the window below to see <code>__data__</code>), and the value of this item is as same as the one in the array. This is what we call <strong>data binding</strong>.</p>
<p>So let's explain the code:</p>
<ul>
<li><code>select(body)</code> returns the reference to the body element of the page. This hands down the reference for the next method to operate on.</li>
<li><code>selectAll(&quot;p&quot;)</code> is crucial here. It of course selects all the <code>p</code> elements in the page. But at this point, we haven't got any <code>p</code> elements yet (the page starts without one and we haven't appended any yet). These will the be things in the future. Think of them as placeholders. Or callback actions, meaning if there are any new <code>p</code> elements added to the page by this code chain, we will do things as specified after this.</li>
<li><code>data(data)</code> uses the <code>data()</code> method that takes an input named <code>data</code> as we defined prior to this as a random array. This one counts the number of data items in the input and for every item all the code after this point will be executed once.</li>
<li><code>enter()</code> provides a handle or placeholder for each of the yet-to-be-created elements selection. With this, we specify how these elements should be processed once they are created. The handle is then handed down to the next action in the chain.</li>
<li>The step step here is to append a <code>p</code> element to the page (again, this is done for each data item). We then pass the reference of the newly created element to the next one in the chain.</li>
<li><code>text(&quot;New Paragraph&quot;)</code> simply change the text in the paragraph to the input string.</li>
</ul>
<h2 id="printing-out-the-data">Printing out the data</h2>
<p>Now let's try to actually print out the data on the page. We can replace the previous code part with the following (keep the data initialization part though):</p>
<pre><code class="language-js"><div>d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .selectAll(<span class="hljs-string">&quot;p&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;p&quot;</span>)
    .text(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d; });
</div></code></pre>
<p>If we replace the last line in the above with the following, we get a more expressive page:</p>
<pre><code class="language-js"><div>    .text(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;data #&#x27;</span> + i + <span class="hljs-string">&#x27; is &#x27;</span> + d; });
</div></code></pre>
<p>Basically, each new <code>p</code> element gets a piece of the data, which is referred to as <code>d</code> in the anonymous function in the last line of code (note the alternative version allows us to get both the data and its index in the array).</p>
<p>Writing <strong>anonymous functions</strong> can save space. But when the function gets too long, it is a better exercise to move the function out of the calling. Here is another way to do it:</p>
<pre><code class="language-js"><div>d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .selectAll(<span class="hljs-string">&quot;p&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;p&quot;</span>)
    .text(text_func);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">text_func</span>(<span class="hljs-params">d</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Data #&#x27;</span> + i + <span class="hljs-string">&#x27;: &#x27;</span> + d; 
}
</div></code></pre>
<p>Now we want to do more with the same data. How about changing the way the data is presented? We can try to style the printout based on the values in the data.</p>
<pre><code class="language-js"><div>d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .selectAll(<span class="hljs-string">&quot;p&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;p&quot;</span>)
    .text(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d; })
    .style(<span class="hljs-string">&quot;color&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
        <span class="hljs-keyword">if</span> (d&lt;=<span class="hljs-number">5</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;green&quot;</span>;
        <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;red&quot;</span>
        });
</div></code></pre>
<h2 id="basic-graphing">Basic graphing</h2>
<p>Before we try any graphing/plotting, let's take a look at the <code>div</code> element. We can actually do a lot of things with this kind of elements (since it is simply a blank element to begin with). Now, we first define a class (either internal in the <code>style</code> tag or or external in a CSS file):</p>
<pre><code class="language-css"><div><span class="hljs-selector-tag">div</span><span class="hljs-selector-class">.bar</span> {
    <span class="hljs-attribute">display</span>: inline-block;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">75px</span>;
    <span class="hljs-attribute">background-color</span>: steelblue;
}
</div></code></pre>
<p>and then add the following into a blank HTML.</p>
<pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bar&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div></code></pre>
<p>This should yield a static bar in steelblue. Now, it is time to try our newly acquired coding power in D3. This time, instead of handling in the <code>p</code> elements, we will work on the <code>div</code> elements. Let's change the code in our previous example so that the D3 part of the code looks like this:</p>
<pre><code class="language-js"><div>d3.select(<span class="hljs-string">&quot;body&quot;</span>).selectAll(<span class="hljs-string">&quot;div&quot;</span>)
    .data(data)  <span class="hljs-comment">// &lt;-- The answer is here!</span>
    .enter()
    .append(<span class="hljs-string">&quot;div&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;bar&quot;</span>)
    .style(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
        <span class="hljs-keyword">return</span> d * <span class="hljs-number">15</span> + <span class="hljs-string">&quot;px&quot;</span>;
    });
</div></code></pre>
<p>Two new items here. The first is the <strong><code>attr()</code></strong> method. This is what we use to set the attribute of an element. We can call this method multiple times to set multiple attributes. Here we only set one attribute: the class of the <code>div</code> is set to bar. While the bar class gets a default style, we can certainly change any style we want to, and here comes the <strong><code>style()</code></strong> method. In our case, we set the style of height, which is returned from an anonymous function. We want the height of the bar to be proportional to the data value.</p>
<h2 id="svg-basic-shapes">SVG: basic shapes</h2>
<p>Before we move on to more sophisticated drawing, we need to know more fundamentals about drawing for the web. This relates to a particular standard called Scalable  Vector Graphics, of <strong>SVG</strong>. To understand how SVG works, let's put the following into another HTML file (e.g., test-svg.html):</p>
<pre><code class="language-xml"><div><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;550&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;100&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">&quot;250&quot;</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">&quot;30&quot;</span> <span class="hljs-attr">r</span>=<span class="hljs-string">&quot;25&quot;</span>
        <span class="hljs-attr">fill</span>=<span class="hljs-string">&quot;yellow&quot;</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">&quot;red&quot;</span> <span class="hljs-attr">stroke-width</span>=<span class="hljs-string">&quot;5&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
</div></code></pre>
<p>We can use SVG to draw many things, include rect, circle, ellipse, line, text, and path. And each of these shapes can be controlled by various parameters, and by different styles (such as stroke color, fill color, stroke-width, and opacity). Multiple shapes can be put together to form more complicated, layered drawings. Here are some examples of some of the simple shapes (with parameters):</p>
<pre><code class="language-xml"><div><span class="hljs-tag">&lt;<span class="hljs-name">rect</span> <span class="hljs-attr">x</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">y</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;500&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;50&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">&quot;250&quot;</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">&quot;25&quot;</span> <span class="hljs-attr">r</span>=<span class="hljs-string">&quot;25&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ellipse</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">&quot;250&quot;</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">&quot;25&quot;</span> <span class="hljs-attr">rx</span>=<span class="hljs-string">&quot;100&quot;</span> <span class="hljs-attr">ry</span>=<span class="hljs-string">&quot;25&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">line</span> <span class="hljs-attr">x1</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">y1</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">x2</span>=<span class="hljs-string">&quot;500&quot;</span> <span class="hljs-attr">y2</span>=<span class="hljs-string">&quot;50&quot;</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">&quot;black&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">text</span> <span class="hljs-attr">x</span>=<span class="hljs-string">&quot;250&quot;</span> <span class="hljs-attr">y</span>=<span class="hljs-string">&quot;25&quot;</span>&gt;</span>Easy-peasy<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
</div></code></pre>
<p>When we think about the coordinates, it is important to remember that the origin of the coordinates here is at the <strong>upper-left corner</strong> of the screen.</p>
<h2 id="drawing-svg-with-d3">Drawing SVG with D3</h2>
<p>While we can definitely use div's to draw simple plots, SVG provides a more powerful option. Let's see how this can be done. Let's make sure the following is the only script in an HTML file:</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>).append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, <span class="hljs-number">500</span>)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-number">100</span>);
svg.append(<span class="hljs-string">&quot;circle&quot;</span>)
    .attr(<span class="hljs-string">&quot;cx&quot;</span>, <span class="hljs-number">250</span>)
    .attr(<span class="hljs-string">&quot;cy&quot;</span>, <span class="hljs-number">30</span>)
    .attr(<span class="hljs-string">&quot;r&quot;</span>, <span class="hljs-number">25</span>);
svg.selectAll(<span class="hljs-string">&quot;circle&quot;</span>)
    .attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>)
    .attr(<span class="hljs-string">&quot;stroke&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>)
    .attr(<span class="hljs-string">&quot;stroke-width&quot;</span>, <span class="hljs-number">5</span>);
</div></code></pre>
<p>Now, we bind the drawing with out random data:</p>
<pre><code class="language-js"><div>data = [];
<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">5</span>; i++)
    data[i] = <span class="hljs-built_in">Math</span>.floor((<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">10</span>) + <span class="hljs-number">1</span>);

<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, <span class="hljs-number">500</span>)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-number">200</span>)
    .selectAll(<span class="hljs-string">&quot;circle&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;circle&quot;</span>)
    .attr(<span class="hljs-string">&quot;cx&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> i*<span class="hljs-number">30</span> + <span class="hljs-number">50</span>;})
    .attr(<span class="hljs-string">&quot;cy&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> <span class="hljs-number">100</span>-d*<span class="hljs-number">5</span>;})
    .attr(<span class="hljs-string">&quot;r&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> d*<span class="hljs-number">2</span>;})
    .attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>)
    .attr(<span class="hljs-string">&quot;stroke&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>)
    .attr(<span class="hljs-string">&quot;stroke-width&quot;</span>, <span class="hljs-number">5</span>);
</div></code></pre>
<p>The above code will work, but it looks awful! Let's clear this up a little so we can see more structures of it (just the D3 part). The code listed below may look more clumsy, but it gives us a clear idea of the things created and how to control them.</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, <span class="hljs-number">500</span>)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-number">200</span>);

<span class="hljs-keyword">var</span> circles = svg.selectAll(<span class="hljs-string">&quot;circle&quot;</span>)  <span class="hljs-comment">// make new shapes</span>
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;circle&quot;</span>);

circles.attr(<span class="hljs-string">&quot;cx&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> i*<span class="hljs-number">30</span> + <span class="hljs-number">50</span>;})  <span class="hljs-comment">// control geometry</span>
    .attr(<span class="hljs-string">&quot;cy&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> <span class="hljs-number">100</span>-d*<span class="hljs-number">5</span>;})
    .attr(<span class="hljs-string">&quot;r&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> d*<span class="hljs-number">2</span>;});


circles.attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>)  <span class="hljs-comment">/// control style</span>
    .attr(<span class="hljs-string">&quot;stroke&quot;</span>, <span class="hljs-string">&quot;orange&quot;</span>)
    .attr(<span class="hljs-string">&quot;stroke-width&quot;</span>, <span class="hljs-number">5</span>);
</div></code></pre>
<h2 id="svg-bar-charts">SVG bar charts</h2>
<p>Now we look at how to make the same bar chart as we did with div's using the same data. But this time we use SVG.</p>
<pre><code class="language-js"><div>data = [];
<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">25</span>; i++)
    data[i] = <span class="hljs-built_in">Math</span>.floor((<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">50</span>) + <span class="hljs-number">1</span>);

<span class="hljs-keyword">var</span> w = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> h = <span class="hljs-number">100</span>;
<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, h);

<span class="hljs-keyword">var</span> rects = svg.selectAll(<span class="hljs-string">&quot;rect&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;rect&quot;</span>);

rects.attr(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> i * (w / data.length);})  <span class="hljs-comment">// control geometry</span>
    .attr(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-number">0</span>)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> d*<span class="hljs-number">2</span>;})
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w/data.length - <span class="hljs-number">1</span>);

rects.attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;steelblue&quot;</span>);
</div></code></pre>
<p>The above bar chart is &quot;upside down&quot; because the Y axis increases from top to bottom on the screen. We can easily flip it by changing the <code>y</code> attribute to the following:</p>
<pre><code class="language-js"><div>    .attr(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> h - d*<span class="hljs-number">2</span>;} )
</div></code></pre>
<p>In the same fashion, we can draw a barchart with horizontal bars.</p>
<pre><code class="language-js"><div>data = [];
<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">25</span>; i++)
    data[i] = <span class="hljs-built_in">Math</span>.floor((<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">50</span>) + <span class="hljs-number">1</span>);

<span class="hljs-keyword">var</span> w = <span class="hljs-number">100</span>;
<span class="hljs-keyword">var</span> h = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, h);

<span class="hljs-keyword">var</span> rects = svg.selectAll(<span class="hljs-string">&quot;rect&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;rect&quot;</span>);

rects.attr(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> i * (h / data.length);})  <span class="hljs-comment">// control geometry</span>
    .attr(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-number">0</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> d*<span class="hljs-number">2</span>;})
    .attr(<span class="hljs-string">&quot;height&quot;</span>, h/data.length - <span class="hljs-number">1</span>);

rects.attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;steelblue&quot;</span>);
</div></code></pre>
<h2 id="scales">Scales</h2>
<p>This is a huge life saving function provided in D3. Mike Bostock, the inventor of D3, defined scales as &quot;functions that map from an input domain to an output range&quot; (<a href="https://github.com/d3/d3-3.x-api-reference/blob/master/Quantitative-Scales.html">link to old version</a>). More information about D3 scales can be found at <a href="https://github.com/d3/d3-scale">here</a>.</p>
<p>In the above examples, we have seen how the bars in the barchart are mapped to the X axis in a hard-coded fashion. Scales in D3 can make such mapping process automatic. To make it work, we need a <strong>domain</strong> that is basically our data and a <strong>range</strong> that includes the target numbers. In our particular case, we have a domain of 25 (or 5 depending on which case we are looking at) integers, each representing a bar to be drawn, and we want to map it to the X axis that ranges from 0 to 500 as defined by the width of the SVG. Just remember this: from domain to range.</p>
<p>In our case, we are looking at a linear scale and we can create and test one like this:</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> scale = d3.scaleLinear();
alert(scale(<span class="hljs-number">5</span>));
</div></code></pre>
<p>The above scale apparently will only return whatever is in the input. This is because we haven't defined any domain (input) and range(output) yet. Things get more interesting with the following code:</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> scale = d3.scaleLinear();
scale.domain([<span class="hljs-number">0</span>, <span class="hljs-number">10</span>]).range([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>]);
alert(<span class="hljs-string">&quot;scale(5) = &quot;</span> + scale(<span class="hljs-number">5</span>));
alert(<span class="hljs-string">&quot;scale(200) = &quot;</span> + scale(<span class="hljs-number">200</span>));
</div></code></pre>
<p>The last line shows that the scale is quite flexible in handling values outside the domain.</p>
<p>Now we can use this new tool to make the barchart more flexible. We use the functions called d3.min and d3.max to get the minimal and maximal values in an array.</p>
<pre><code class="language-js"><div>data = [];
<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">25</span>; i++)
    data[i] = <span class="hljs-built_in">Math</span>.floor((<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">50</span>) + <span class="hljs-number">1</span>);

<span class="hljs-keyword">var</span> w = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> h = <span class="hljs-number">100</span>;
<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, h);

<span class="hljs-keyword">var</span> xScale = d3.scaleLinear().domain([<span class="hljs-number">0</span>, data.length]).range([<span class="hljs-number">0</span>, w]);
<span class="hljs-keyword">var</span> yScale = d3.scaleLinear().domain([<span class="hljs-number">0</span>, d3.max(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d; })]).range([<span class="hljs-number">0</span>, h]);

<span class="hljs-keyword">var</span> rects = svg.selectAll(<span class="hljs-string">&quot;rect&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;rect&quot;</span>)
    .attr(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> xScale(i);})
    .attr(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> h-yScale(d);} )
    .attr(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> yScale(d);})
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w/data.length - <span class="hljs-number">1</span>);

rects.attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;steelblue&quot;</span>);

<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;data.length; i++)
    <span class="hljs-built_in">document</span>.write(<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span> + i + <span class="hljs-string">&quot;: &quot;</span> + data[i]);
</div></code></pre>
<p>There are many different kinds of scales and even for the linear scale there are still more to use and learn.</p>
<h2 id="drawing-axes">Drawing axes</h2>
<p>We will have to put something more useful on the plot. This would include the axes (c.f. Tufte). This requires the js code below and some CSS after that.</p>
<pre><code class="language-js"><div>data = [];
<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">25</span>; i++)
    data[i] = <span class="hljs-built_in">Math</span>.floor((<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">50</span>) + <span class="hljs-number">1</span>);

<span class="hljs-keyword">var</span> total_w = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> total_h = <span class="hljs-number">100</span>;

<span class="hljs-keyword">var</span> margin = {<span class="hljs-attr">top</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>};
<span class="hljs-keyword">var</span> w = total_w - margin.left - margin.right;
<span class="hljs-keyword">var</span> h = total_h - margin.top - margin.bottom;

<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w + margin.left + margin.right)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, h + margin.top + margin.bottom);

<span class="hljs-keyword">var</span> xScale = d3.scaleLinear().
    domain([<span class="hljs-number">0</span>, data.length]).range([margin.left, w+margin.left]);
<span class="hljs-keyword">var</span> yScale = d3.scaleLinear().
    domain([<span class="hljs-number">0</span>, d3.max(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d; })]).
    range([h, margin.top]);

<span class="hljs-keyword">var</span> rects = svg.selectAll(<span class="hljs-string">&quot;rect&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;rect&quot;</span>)
    .attr(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> xScale(i);})
    .attr(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> yScale(d);} )
    .attr(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> h-yScale(d);})
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w/data.length - <span class="hljs-number">1</span>);

rects.attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;steelblue&quot;</span>);
<span class="hljs-keyword">var</span> xAxis = d3.axisBottom()
    .scale(xScale)
    .ticks(<span class="hljs-number">5</span>);

svg.append(<span class="hljs-string">&quot;g&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;axis&quot;</span>)  <span class="hljs-comment">//Assign &quot;axis&quot; class</span>
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;translate(0,&quot;</span> + (h) + <span class="hljs-string">&quot;)&quot;</span>)
    .call(xAxis);

<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;data.length; i++)
    <span class="hljs-built_in">document</span>.write(<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span> + i + <span class="hljs-string">&quot;: &quot;</span> + data[i]);

</div></code></pre>
<p>Here is the style.</p>
<pre><code class="language-css"><div><span class="hljs-selector-class">.axis</span> path,
<span class="hljs-selector-class">.axis</span> line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}

<span class="hljs-selector-class">.axis</span> text {
    <span class="hljs-attribute">font-family</span>: sans-serif;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">11px</span>;
}
</div></code></pre>
<p>Adding the X axis will be relatively straightforward. Now we add the Y axis:</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> yAxis = d3.axisLeft()
    .scale(yScale)
    .ticks(<span class="hljs-number">3</span>);

svg.append(<span class="hljs-string">&quot;g&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;axis&quot;</span>)
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;translate(&quot;</span> + margin.left + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-number">0</span> +<span class="hljs-string">&quot;)&quot;</span>)
    .call(yAxis);
</div></code></pre>
<p>More information about axes can be found at <a href="https://github.com/d3/d3-axis/">here</a>.</p>
<h2 id="more-on-data">More on data</h2>
<p>We have been using a simple random data set to illustrate the use of D3. How about more complicated data? We are going to extend our data in different ways. We will explore a 2-D table that is organized as a 2D array. We have the second column in numerical values, but the first column will be categorical and then date/time.</p>
<p>I like random things so we will keep everything random, semantically nonsense but technically nontrivial. The following will be in a file called <strong><code>random_stuff.js</code></strong> that is in the same folder provided for this tutorial and we will load it into an HTML file to use it.</p>
<p>Here is a way to generate a random 2D array (assuming we have loaded <code>random_stuff.js</code>):</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> data = [];
<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">15</span>; i++) {
    data[i] = [xword(), randint(<span class="hljs-number">1</span>, <span class="hljs-number">50</span>)];
}
<span class="hljs-comment">// alert(data);</span>
</div></code></pre>
<p>And we can use this data to draw another barchart with some simple changes (note the use of <code>d[1]</code>).</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> total_w = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> total_h = <span class="hljs-number">100</span>;

<span class="hljs-keyword">var</span> margin = {<span class="hljs-attr">top</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>};
<span class="hljs-keyword">var</span> w = total_w - margin.left - margin.right;
<span class="hljs-keyword">var</span> h = total_h - margin.top - margin.bottom;

<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w + margin.left + margin.right)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, h + margin.top + margin.bottom);

<span class="hljs-keyword">var</span> xScale = d3.scaleLinear().
    domain([<span class="hljs-number">0</span>, data.length]).range([margin.left, w+margin.left]);
<span class="hljs-keyword">var</span> yScale = d3.scaleLinear().
    domain([<span class="hljs-number">0</span>, d3.max(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d[<span class="hljs-number">1</span>]; })]).
    range([h, margin.top]);

<span class="hljs-keyword">var</span> rects = svg.selectAll(<span class="hljs-string">&quot;rect&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;rect&quot;</span>)
    .attr(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> xScale(i);})
    .attr(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> yScale(d[<span class="hljs-number">1</span>]);} )
    .attr(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> h-yScale(d[<span class="hljs-number">1</span>]);})
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w/data.length - <span class="hljs-number">1</span>)
    .attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;steelblue&quot;</span>);

<span class="hljs-keyword">var</span> xAxis = d3.axisBottom()
    .scale(xScale)
    .ticks(<span class="hljs-number">5</span>);

svg.append(<span class="hljs-string">&quot;g&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;axis&quot;</span>)  <span class="hljs-comment">//Assign &quot;axis&quot; class</span>
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;translate(0,&quot;</span> + (h) + <span class="hljs-string">&quot;)&quot;</span>)
    .call(xAxis);

<span class="hljs-keyword">var</span> yAxis = d3.axisLeft()
    .scale(yScale)
    .ticks(<span class="hljs-number">3</span>);

svg.append(<span class="hljs-string">&quot;g&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;axis&quot;</span>)
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;translate(&quot;</span> + margin.left + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-number">0</span> +<span class="hljs-string">&quot;)&quot;</span>)
    .call(yAxis);

<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;data.length; i++)
    <span class="hljs-built_in">document</span>.write(<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span> + i + <span class="hljs-string">&quot;: &quot;</span> + data[i]);

</div></code></pre>
<h3 id="categorical-axis">Categorical axis</h3>
<p>Up to this point, everything seems to work fine, except the X axis doesn't make sense since our data on the X axis is categorical (fake names). Now we are going to use an <strong>ordinal scale</strong> for the X axis. Here, each name in the data is mapped to a band in a range (D3 term). This is called a <a href="https://github.com/d3/d3-scale#band-scales">band scale</a>. To make such a scale, we will need to put all the individual values in the names into an array, and we do this using the following example:</p>
<!-- Such a range is called [rangeRoundBands](https://github.com/d3/d3-3.x-api-reference/blob/master/Ordinal-Scales.md#ordinal_rangeRoundBands).  (old version 3) -->
<pre><code class="language-js"><div>alert(data.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d[<span class="hljs-number">0</span>]; }));
</div></code></pre>
<p>With that, we can write the following code to make sure the X axis is rendered as categories.</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> data=[];
<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">15</span>; i++) {
    data[i] = [xword(), randint(<span class="hljs-number">1</span>, <span class="hljs-number">50</span>)];
}

<span class="hljs-keyword">var</span> total_w = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> total_h = <span class="hljs-number">200</span>;

<span class="hljs-keyword">var</span> margin = {<span class="hljs-attr">top</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>};
<span class="hljs-keyword">var</span> w = total_w - margin.left - margin.right;
<span class="hljs-keyword">var</span> h = total_h - margin.top - margin.bottom;

<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w + margin.left + margin.right)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, h + margin.top + margin.bottom);

<span class="hljs-keyword">var</span> yScale = d3.scaleLinear().
    domain([<span class="hljs-number">0</span>, d3.max(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d[<span class="hljs-number">1</span>]; })]).
    range([h, margin.top]);

<span class="hljs-keyword">var</span> yAxis = d3.axisLeft()
    .scale(yScale)
    .ticks(<span class="hljs-number">3</span>);

xScale = d3.scaleBand()
    .domain(data.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d[<span class="hljs-number">0</span>]; }))
    .paddingInner(<span class="hljs-number">0.1</span>)

    .rangeRound([margin.left, w], <span class="hljs-number">0.05</span>);           <span class="hljs-comment">// new range, with padding of 0.1</span>

xAxis = d3.axisBottom()
    .scale(xScale);

<span class="hljs-keyword">var</span> rects = svg.selectAll(<span class="hljs-string">&quot;rect&quot;</span>)
    .data(data)
    .enter()
    .append(<span class="hljs-string">&quot;rect&quot;</span>)
    .attr(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d, i</span>) </span>{<span class="hljs-keyword">return</span> xScale(d[<span class="hljs-number">0</span>]);})
    .attr(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> yScale(d[<span class="hljs-number">1</span>]);} )
    .attr(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{<span class="hljs-keyword">return</span> h-yScale(d[<span class="hljs-number">1</span>]);})
    .attr(<span class="hljs-string">&quot;width&quot;</span>, xScale.bandwidth())                   <span class="hljs-comment">// NEW way of getting width</span>
    .attr(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;steelblue&quot;</span>);

svg.append(<span class="hljs-string">&quot;g&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;axis&quot;</span>)
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;translate(&quot;</span> + margin.left + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-number">0</span> +<span class="hljs-string">&quot;)&quot;</span>)
    .call(yAxis);

svg.append(<span class="hljs-string">&quot;g&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;x axis&quot;</span>)
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;translate(0,&quot;</span> + h + <span class="hljs-string">&quot;)&quot;</span>)
    .call(xAxis)
    .selectAll(<span class="hljs-string">&quot;text&quot;</span>)
    .attr(<span class="hljs-string">&quot;y&quot;</span>, <span class="hljs-number">5</span>)
    .attr(<span class="hljs-string">&quot;x&quot;</span>, <span class="hljs-number">5</span>)
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;rotate(45)&quot;</span>)
    .style(<span class="hljs-string">&quot;text-anchor&quot;</span>, <span class="hljs-string">&quot;start&quot;</span>);

<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;data.length; i++)
    <span class="hljs-built_in">document</span>.write(<span class="hljs-string">&quot;&lt;br/&gt;&quot;</span> + i + <span class="hljs-string">&quot;: &quot;</span> + data[i]);

</div></code></pre>
<p>And we need a new css selector to specify that the X axis does not draw the horizontal line.</p>
<pre><code class="language-css"><div><span class="hljs-selector-class">.x</span><span class="hljs-selector-class">.axis</span> path {
    <span class="hljs-attribute">display</span>: none;
}
</div></code></pre>
<p>More information about scale band can be found at <a href="https://observablehq.com/@d3/d3-scaleband">here</a>.</p>
<h2 id="todo">TODO</h2>
<p>Make a barchart where the bars are filled with two alternating colors. For example, the bars can be colored as blue, green, blue, green, etc. Hint: replace &quot;steelblue&quot; with a function in the fill style for the rectangles.</p>
<hr>
<p>(Optional)</p>
<h3 id="time-scales-and-temporal-axis">Time scales and temporal axis</h3>
<p><a href="https://github.com/d3/d3-time-format">time formatting</a></p>
<p><a href="https://github.com/d3/d3-scale#time-scales">Time scale</a> is a special continuous scales in D3.</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> n = <span class="hljs-number">15</span>;
<span class="hljs-keyword">var</span> dates = [];
<span class="hljs-keyword">var</span> data=[];

<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;n; i++)
    dates[i] = randomDate(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2012</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());

dates.sort(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> a-b; });

<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i&lt;n; i++) {
    data[i] = [<span class="hljs-built_in">String</span>(dates[i]), xword(), randint(<span class="hljs-number">1</span>, <span class="hljs-number">50</span>)];
}

<span class="hljs-comment">// Sat Oct 27 2012 20:54:47 GMT-0400 (EDT)</span>

<span class="hljs-keyword">var</span> parseDateTime = d3.timeParse(<span class="hljs-string">&quot;%a %b %d %Y %H:%M:%S&quot;</span>);

data.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{
    d[<span class="hljs-number">0</span>] = parseDateTime(d[<span class="hljs-number">0</span>].slice(<span class="hljs-number">0</span>, <span class="hljs-number">23</span>));
});

<span class="hljs-keyword">var</span> total_w = <span class="hljs-number">500</span>;
<span class="hljs-keyword">var</span> total_h = <span class="hljs-number">200</span>;

<span class="hljs-keyword">var</span> margin = {<span class="hljs-attr">top</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>};
<span class="hljs-keyword">var</span> w = total_w - margin.left - margin.right;
<span class="hljs-keyword">var</span> h = total_h - margin.top - margin.bottom;

<span class="hljs-keyword">var</span> svg = d3.select(<span class="hljs-string">&quot;body&quot;</span>)
    .append(<span class="hljs-string">&quot;svg&quot;</span>)
    .attr(<span class="hljs-string">&quot;width&quot;</span>, w + margin.left + margin.right)
    .attr(<span class="hljs-string">&quot;height&quot;</span>, h + margin.top + margin.bottom);

<span class="hljs-keyword">var</span> yScale = d3.scaleLinear().
    domain([<span class="hljs-number">0</span>, d3.max(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d[<span class="hljs-number">2</span>]; })]).
    range([h+margin.top, margin.top]);

<span class="hljs-keyword">var</span> yAxis = d3.axisLeft()
    .scale(yScale)
    .ticks(<span class="hljs-number">3</span>);

<span class="hljs-keyword">var</span> xScale = d3.scaleTime()
    .domain(d3.extent(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> d[<span class="hljs-number">0</span>]; }))
    .range([margin.left, w+margin.left]);

<span class="hljs-keyword">var</span> xAxis = d3.axisBottom()
    .scale(xScale)
    .ticks(<span class="hljs-number">5</span>);

my_line = d3.line()  
    <span class="hljs-comment">// .interpolate(&quot;linear&quot;)  //////////////////////////////////////// </span>
    .x(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> xScale(d[<span class="hljs-number">0</span>]); })
    .y(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>{ <span class="hljs-keyword">return</span> yScale(d[<span class="hljs-number">2</span>]); });

<span class="hljs-keyword">var</span> path = svg
    .append(<span class="hljs-string">&quot;path&quot;</span>)
	.attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;line&quot;</span>)
    .attr(<span class="hljs-string">&quot;d&quot;</span>, my_line(data));

svg.append(<span class="hljs-string">&quot;g&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;axis&quot;</span>)
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;translate(&quot;</span> + margin.left + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-number">0</span> +<span class="hljs-string">&quot;)&quot;</span>)
    .call(yAxis);

svg.append(<span class="hljs-string">&quot;g&quot;</span>)
    .attr(<span class="hljs-string">&quot;class&quot;</span>, <span class="hljs-string">&quot;x axis&quot;</span>)
    .attr(<span class="hljs-string">&quot;transform&quot;</span>, <span class="hljs-string">&quot;translate(0,&quot;</span> + (h+margin.top) + <span class="hljs-string">&quot;)&quot;</span>)
    .call(xAxis);

<span class="hljs-built_in">console</span>.log(data);
</div></code></pre>
<p>Here is the CSS part:</p>
<pre><code class="language-css"><div><span class="hljs-selector-class">.axis</span> path,
<span class="hljs-selector-class">.axis</span> line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}

<span class="hljs-selector-class">.axis</span> text {
    <span class="hljs-attribute">font-family</span>: sans-serif;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">11px</span>;
}

<span class="hljs-selector-class">.x</span><span class="hljs-selector-class">.axis</span> path {
    <span class="hljs-attribute">display</span>: none;
}
<span class="hljs-selector-class">.line</span> {
  fill: none;
  stroke: steelblue;
  stroke-<span class="hljs-attribute">width</span>: <span class="hljs-number">1.5px</span>;
}
</div></code></pre>
<h3 id="todo-1">TODO</h3>
<p>Add a horizontal axis to the above graph.</p>
<h2 id="loading-data-from-files">Loading data from files</h2>
<p>Using d3.json, d3.csv, etc.</p>

        
        
    </body>
    </html>